<!DOCTYPE html>
<!-- saved from url=(0107)http://prose.io/#ChristopheDucamp/xtof-clean-blog/edit/master/_posts/2014-01-12-deploiement-Jekyll.markdown -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <title>Editing _posts/2014-01-12-deploiement-Jekyll.markdown/2014-01-12-deploiement-Jekyll.markdown at master · Prose</title>
  <meta name="apple-mobile-web-app-status-bar-style" content="white">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="http://prose.io/img/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="http://prose.io/img/prose@57.png">
  <link rel="apple-touch-icon" sizes="72x72" href="http://prose.io/img/prose@72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="http://prose.io/img/prose@114.png">
  <link rel="apple-touch-icon" sizes="144x144" href="http://prose.io/img/prose@144.png">
  <link rel="stylesheet" href="./Editing _posts_2014-01-12-deploiement-Jekyll.markdown_2014-01-12-deploiement-Jekyll.markdown at master · Prose_files/style.css">
<style type="text/css">:root #content > #center > .dose > .dosesingle,
:root #content > #right > .dose > .dosesingle
{display:none !important;}</style></head>
<body>
  <div id="prose" class="authenticated">

<div id="loader" class="loader" style="display: none;"><div class="loading round clearfix">
  <div class="loading-icon"></div>
  <span class="message">Loading File</span>
</div>
</div>
<div id="drawer" class="sidebar"><div id="orgs"></div>
<div id="branches"></div>
<div id="history"></div>
<div id="drafts"></div>
<div id="save"><div><div class="inner">
  <h2 class="label">Describe your Changes</h2>
</div>
<div class="inner authoring">
  <div class="commit">
    <textarea class="commit-message" placeholder="Updated 2014-01-12-deploiement-Jekyll.markdown"></textarea>
    <a class="ico small cancel round" title="Cancel" href="http://prose.io/#" data-action="cancel">
      <span class="popup round arrow-bottom">Cancel</span>
    </a>
  </div>
  <a class="confirm button round" href="http://prose.io/#" data-action="confirm">Commit</a>
</div>
</div></div>
<div id="settings"><div><div class="inner">
  <h2 class="label">Options</h2>
</div>
<div class="inner authoring">
  
    <a class="draft button round" href="http://prose.io/#" data-action="draft">Create Draft</a>
  
  
  

  <!-- if !isNew() and is writable -->
  <a class="delete button round" href="http://prose.io/#" data-action="destroy">Delete This File</a>
</div>


  <div class="inner">
    <h2 class="label">File Path</h2>
    <input type="text" class="filepath" placeholder="_posts/2014-01-12-deploiement-Jekyll.markdown" value="_posts/2014-01-12-deploiement-Jekyll.markdown">
  </div>

</div></div>
</div>
<nav id="navigation" class="file meta preview settings"><ul class="mobile nav clearfix">
  <li>
    <a href="http://prose.io/#" class="toggle ico menu round"></a>
  </li>
</ul>

<ul class="file nav clearfix save">
  <li>
    <a href="http://prose.io/#" title="Edit" class="ico round pencil edit active" data-state="edit">
      <span class="popup round arrow-right">Edit</span>
    </a>
  </li>

  <li>
    <a href="http://prose.io/#" title="Preview" class="ico round eye blob preview" data-state="blob">
      <span class="popup round arrow-right">Preview</span>
    </a>
  </li>

  <li>
    <a href="http://prose.io/#" title="Meta Data" class="ico round metadata meta" data-state="meta">
      <span class="popup round arrow-right">Meta Data</span>
    </a>
  </li>

  <li>
    <a href="http://prose.io/#" title="Settings" class="ico round sprocket settings" data-state="settings" data-drawer="true">
      <span class="popup round arrow-right">Settings</span>
    </a>
  </li>

  <li>
    <a href="http://prose.io/#" title="Save" class="ico round save" data-state="save">
      <div class="status"></div>
      <span class="popup round arrow-right">Changes to Save</span>
    </a>
  </li>
</ul>

<ul class="auth nav clearfix">
  <li>
    <a class="ico round switch login" href="https://github.com/login/oauth/authorize?client_id=c602a8bd54b1e774f864&amp;scope=repo&amp;redirect_uri=http%3A%2F%2Fprose.io%2F" title="Authorize on GitHub">
      <span class="popup round arrow-right">Authorize on GitHub</span>
    </a>
  </li>
</ul>
</nav>
<div id="main"><div id="post"><header id="heading" class="heading limiter clearfix">
  <div class="round avatar">
    <span class="ico round document gfm"></span>
  </div>
  <div class="fl details">
    <h4 class="parent-trail"><a href="http://prose.io/#ChristopheDucamp">ChristopheDucamp</a> / <a href="http://prose.io/#ChristopheDucamp/xtof-clean-blog">xtof-clean-blog</a></h4>
    <!-- if (isNew() && !translate) placeholder, not value -->
    <input type="text" class="headerinput" data-mode="title" value="Comment Déployer Jekyll">
    <div class="mask"></div>
  </div>

</header>
<div id="modal"></div>

<div id="post" class="post limiter">
  <div class="editor views markdown">
    <div id="diff" class="view prose diff">
      <h2>Review your changes:<br>
        <span class="deemphasize small">Additions are highlighted in green. Deletions are crossed out.</span>
      </h2>
      <div class="diff-content inner"></div>
    </div>
    <div id="meta" class="view round meta"><div class="form"><div class="form-item">
  <label for="raw">Raw Metadata</label>
  
  <fieldset>
    <div name="raw" id="raw" class="metafield inner"><div class="CodeMirror cm-s-prose-bright CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none; font-size: 4px;"></textarea></div><div class="CodeMirror-hscrollbar"><div style="height: 1px;"></div></div><div class="CodeMirror-vscrollbar"><div style="width: 1px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"><div style="position: relative;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>x</span></pre></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"></div><div class="CodeMirror-cursor">&nbsp;</div><div class="CodeMirror-cursor CodeMirror-secondarycursor">&nbsp;</div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div></div>
  </fieldset>
</div>
</div>
<a href="http://prose.io/#" class="button round finish">Done</a>
</div>
    <div id="edit" class="view active edit">
      <div class="topbar-wrapper">
        <div class="topbar fixed">
          <div id="toolbar" class="containment toolbar round">
  
    <a href="http://prose.io/#" class="publish-flag published round contain" data-state="true">
      Published<span class="ico small checkmark"></span>
    </a>
  



<div class="options clearfix">
  <ul class="group round clearfix">
    <li><a href="http://prose.io/#" title="Heading" data-key="heading" data-snippet="##

">h2</a></li>
    <li><a href="http://prose.io/#" title="Sub Heading" data-key="sub-heading" data-snippet="###

">h3</a></li>
  </ul>
  <ul class="group round clearfix">
    <li>
      <a title="Insert Link" href="http://prose.io/#" data-key="link" data-snippet="false" data-dialog="true">
        <span class="ico small link"></span>
      </a>
    </li>
    <li>
      <a title="Insert Image" href="http://prose.io/#" data-key="media" data-snippet="false" data-dialog="true">
        <span class="ico small picture"></span>
      </a>
    </li>
  </ul>
  <ul class="group round clearfix">
    <li><a href="http://prose.io/#" title="Bold" data-key="bold" data-snippet="****">B</a></li>
    <li>
      <a data-key="italic" href="http://prose.io/#" title="Italic" data-snippet="__">
        <span class="ico small italic"></span>
      </a>
    </li>
  </ul>
  <ul class="group round clearfix">
    <li>
      <a title="Blockquote" href="http://prose.io/#" data-key="quote" data-snippet="&gt; We loved with a love that was more than love

">
        <span class="ico small quote"></span>
      </a>
    </li>
    <li>
      <a href="http://prose.io/#" title="List" data-key="list" data-snippet="- item
- item
- item

">
        <span class="ico small list"></span>
      </a>
    </li>
    <li>
      <a href="http://prose.io/#" title="Numbered List" data-key="numbered-list" data-snippet="1. item
2. item
3. item

">
        <span class="ico small numbered-list"></span>
      </a>
    </li>
  </ul>
  <ul class="group round clearfix">
    <li>
    <a class="round" title="Help" href="http://prose.io/#" data-key="help" data-snippet="false" data-dialog="true">
        <span class="ico small question"></span>
      </a>
    </li>
  </ul>
</div>

<div id="dialog"></div>
</div>
        </div>
      </div>
      <div id="drop" class="drop-mask"></div>
      <textarea id="code" class="code round inner" style="display: none;"></textarea><div class="CodeMirror cm-s-prose-bright CodeMirror-wrap CodeMirror-focused"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 3988px; left: 185.281px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none; font-size: 4px;"></textarea></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 1px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="width: 1px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 6504px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><div style="width: 50px; height: 50px; overflow-x: scroll;"></div></div><div style="position: relative; z-index: 1; display: none;"><div class="CodeMirror-selected" style="position: absolute; left: 185.281px; top: 3940px; width: 117.906px; height: 16px;"></div></div><div class="CodeMirror-code"><pre>&nbsp;</pre><pre><span class="cm-link">[lien de référence (doc Jekyll)]</span><span class="cm-string">(</span><span class="cm-link">http://jekyllrb.com/docs/deployment-methods/</span><span class="cm-string">)</span></pre><pre>&nbsp;</pre><pre><span class="cm-em">_</span><span class="cm-tag">&lt;ins</span> <span class="cm-attribute">datetime</span>=<span class="cm-string">"2014-08-07"</span><span class="cm-tag">&gt;</span>Seul le lien officiel fait référence. Difficultés rencontrées avec le script automatique Glynn. Étude en cours et recherches de scripts SSH et rsync simples à paramétrer pour simplification et automatisation.<span class="cm-tag">&lt;/ins&gt;</span><span class="cm-em">_</span></pre><pre>&nbsp;</pre><pre>Du fait de la nature statique de la production générée, tous les sites construits avec Jekyll peuvent être déployés de différentes façons. Quelques-unes des techniques les plus communes sont décrites ci-dessous.</pre><pre>&nbsp;</pre><pre><span class="cm-header">## Fournisseurs d'hébergement web (FTP)</span></pre><pre>&nbsp;</pre><pre>Quasiment tous les <span class="cm-link">[fournisseurs d'hébergement web]</span><span class="cm-string">(</span><span class="cm-link">http://indiewebcamp.com/web_hosting</span><span class="cm-string">)</span> traditionnels vous permettent de copier des fichiers sur leurs serveurs par FTP. Pour téléverser un site Jekyll sur un hébergeur web en utilisant FTP, lancez simplement la commande <span class="cm-comment">`jekyll`</span> et copiez le répertoire <span class="cm-comment">`_site`</span> généré sur le répertoire racine de votre compte hébergé. Pour la plupart des fournisseurs d'hébergement, ceci se fait généralement sur les répertoires <span class="cm-comment">`httpdocs`</span> ou <span class="cm-comment">`public_html`</span>.</pre><pre>&nbsp;</pre><pre><span class="cm-header">### </span><span class="cm-tag">&lt;span</span> <span class="cm-attribute">id</span>=<span class="cm-string">"glynn"</span><span class="cm-tag">&gt;</span>FTP en utilisant Glynn<span class="cm-tag">&lt;/span&gt;</span></pre><pre>&nbsp;</pre><pre>Il existe un projet appelé <span class="cm-link">[Glynn]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/dmathieu/glynn</span><span class="cm-string">)</span>, qui vous permet de générer facilement vos fichiers statiques du site web motorisé par Jekyll et de les envoyer à votre hébergeur par FTP.</pre><pre>&nbsp;</pre><pre>Par exemple, le fichier <span class="cm-comment">`_config.yml`</span> de cette instance hébergée chez OVH se présente comme suit : </pre><pre>{% highlight yaml %}</pre><pre>ftp_host: ftp.christopheducamp.com</pre><pre>ftp_username: monnomutilisateur</pre><pre>ftp_dir: /www</pre><pre>ftp_passive: false</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>&nbsp;</pre><pre>Pour générer le site et le déployer, il me suffit alors de reprendre la ligne de commande, de me placer à la racine du projet puis de taper la commande :</pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>$ glynn</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>(C'est la solution que j'ai retenue pour le moment : une ligne de commande puis un mot de passe, et tout le site est régénéré et mis en ligne !)</pre><pre>&nbsp;</pre><pre>&nbsp;</pre><pre><span class="cm-header">## Serveur web auto-géré</span></pre><pre>&nbsp;</pre><pre>Si vous avez un accès direct au serveur web de déploiement, le processus est en fait le même, si ce n'est que vous pourriez disposer d'autres méthodes vous étant réservées (comme des accès <span class="cm-comment">`scp`</span>, ou même un accès direct au système de fichiers). Souvenez-vous simplement de vous assurer que les contenus du répertoire <span class="cm-comment">`_site`</span> généré soient placés dans le bon répertoire web racine de votre serveur web.</pre><pre>&nbsp;</pre><pre>&nbsp;</pre><pre><span class="cm-header">##  Méthodes automatisées </span></pre><pre>&nbsp;</pre><pre>Il existe aussi un certain nombre de moyens pour automatiser facilement le déploiement d'un site Jekyll. Si vous avez une autre méthode non listée ci-dessous, nous adorerions l'ajouter si vous <span class="cm-link">[y avez contribué]</span><span class="cm-string">(</span><span class="cm-link">http://jekyllrb.com/docs/contributing/</span><span class="cm-string">)</span> afin que tous les autres puissent aussi en profiter.</pre><pre>&nbsp;</pre><pre><span class="cm-header">###  Git post-update hook</span></pre><pre>&nbsp;</pre><pre>Si vous stockez votre site jekyll dans <span class="cm-link">[Git]</span><span class="cm-string">(</span><span class="cm-link">http://git-scm.com/</span><span class="cm-string">)</span> (vous utilisez un contrôle de version, non ?), il est vraiment facile d'automatiser le processus de déploiement en réglant un hook de mise-à-jour-post dans votre dépôt Git, <span class="cm-link">[comme ceci]</span><span class="cm-string">(</span><span class="cm-link">http://web.archive.org/web/20091223025644/http://www.taknado.com/en/2009/03/26/deploying-a-jekyll-generated-site/</span><span class="cm-string">)</span>.</pre><pre>&nbsp;</pre><pre><span class="cm-header">### Git hook post-receive</span></pre><pre>&nbsp;</pre><pre>Pour faire qu'un serveur distant gère le déploiement pour vous à chaque fois que vous poussez des modifications en utilisant Git, vous pouvez créer un compte utilisateur qui dispose de toutes les clés publiques qui sont autorisées pour déployer dans son fichier <span class="cm-comment">`authorized_keys`</span>.  Une fois cela mis en place, régler le hook post-receive se fait comme suit : </pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>laptop$ ssh deployer@exemple.com</pre><pre>server$ mkdir monrepo.git</pre><pre>server$ cd monrepo.git</pre><pre>server$ git --bare init</pre><pre>server$ cp hooks/post-receive.sample hooks/post-receive</pre><pre>server$ mkdir /var/www/monrepo</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>Ensuite ajoutez les lignes suivantes à <span class="cm-comment">`hooks/post-receive`</span> et assurez-vous que Jekyll soit installé sur le serveur :</pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>GIT_REPO=$HOME/monrepo.git</pre><pre>TMP_GIT_CLONE=$HOME/tmp/monrepo</pre><pre>PUBLIC_WWW=/var/www/monrepo</pre><pre>&nbsp;</pre><pre>git clone $GIT_REPO $TMP_GIT_CLONE</pre><pre>jekyll build -s $TMP_GIT_CLONE -d $PUBLIC_WWW</pre><pre>rm -Rf $TMP_GIT_CLONE</pre><pre>exit</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>Pour finir, faites tourner la commande suivante sur n'importe quel ordinateur d'utilisateur ayant besoin de déployer en utilisant ce hook : </pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>laptops$ git remote add deploy deployer@exemple.com:~/monrepo.git</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>Déployer est maintenant aussi facile que de dire à nginx ou Apache de regarder </pre><pre><span class="cm-comment">`/var/www/monrepo`</span> et de faire tourner ce qui suit : </pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>laptops$ git push deploy master</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre><span class="cm-header">### Jekyll-hook</span></pre><pre>&nbsp;</pre><pre>Vous pouvez aussi utiliser jekyll-hook, un serveur qui écoute les posts webhook à partir de GitHub, génère un site web avec Jekyll, et le migre quelque part ailleur pour publication. Utilisez ça pour faire tourner votre propre serveur web du style-GitHub Pages.</pre><pre>&nbsp;</pre><pre>Cette méthode est utile si vous avez besoin de servir vos sites web derrière un pare-feu, si vous avez besoin de quelques fonctionnalités côté-serveur comme une authentification HTTP basique ou si vous voulez héberger directement votre site sur un CDN ou un hôte comme S3.</pre><pre>&nbsp;</pre><pre>Les étapes de paramétrage sont complètement documentés dans le </pre><pre><span class="cm-link">[repo </span><span class="cm-link cm-comment">`jekyll-hook`</span><span class="cm-link">]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/developmentseed/jekyll-hook</span><span class="cm-string">)</span>.</pre><pre>&nbsp;</pre><pre><span class="cm-header">### Static Publisher</span></pre><pre>&nbsp;</pre><pre><span class="cm-link">[Static Publisher]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/static-publisher/static-publisher</span><span class="cm-string">)</span> est une autre option de déploiement automatisée avec un serveur qui écoute les posts webhook, même si elle n'est pas spécifiquement liée à GitHub. Elle a un déploiement-en-un-clic vers Heroku, elle sait regarder plusieurs projets sur un serveur, elle a une interface-utilisateur d'admin facile et peut publier soit sur S3 ou vers un repository git (par ex. gh-pages).</pre><pre>&nbsp;</pre><pre><span class="cm-header">### Rake</span></pre><pre>&nbsp;</pre><pre>Un autre moyen de déployer votre site Jekyll est d'utiliser <span class="cm-link">[Rake]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/jimweirich/rake</span><span class="cm-string">)</span>, <span class="cm-link">[HighLine]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/JEG2/highline</span><span class="cm-string">)</span> et <span class="cm-link">[Net::SSH]</span><span class="cm-string">(</span><span class="cm-link">http://net-ssh.rubyforge.org/</span><span class="cm-string">)</span>. Un exemple plus complexe de déploiement Jekyll avec Rake qui gère plusieurs branches peut être trouvé dans <span class="cm-link">[Git Ready]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/gitready/gitready/blob/cdfbc4ec5321ff8d18c3ce936e9c749dbbc4f190/Rakefile</span><span class="cm-string">)</span>.</pre><pre>&nbsp;</pre><pre><span class="cm-header">### scp</span></pre><pre>&nbsp;</pre><pre>Une fois que vous avez généré le répertoire <span class="cm-comment">`_site`</span>, vous pouvez facilement le scp en utilisant un script shell <span class="cm-comment">`tasks/deploy`</span> similaire à <span class="cm-link">[ce sript deploy ici]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/henrik/henrik.nyh.se/blob/master/script/deploy</span><span class="cm-string">)</span>. Vous devrez évidemment ajuster les valeurs aux détails de votre site. Il existe même une <span class="cm-link">[commande correspondante TextMate]</span><span class="cm-string">(</span><span class="cm-link">http://gist.github.com/214959</span><span class="cm-string">)</span> qui vous aidera à lancer ce script à partir de TextMate.</pre><pre>&nbsp;</pre><pre><span class="cm-header">### rsync</span></pre><pre>&nbsp;</pre><pre>Une fois que vous avez généré le répertoire <span class="cm-comment">`_site`</span>, vous pouvez facilement le rsync en utilisant un script shell <span class="cm-comment">`tasks/deploy`</span> similaire à ce </pre><pre><span class="cm-link">[script de déploiement ici]</span><span class="cm-string">(</span><span class="cm-link">https://github.com/vitalyrepin/vrepinblog/blob/master/transfer.sh</span><span class="cm-string">)</span>. </pre><pre>Vous devrez bien évidemment changer les valeurs pour refléter les détails de votre site. </pre><pre>&nbsp;</pre><pre>L'autorisation basée-sur-Certificat est un autre moyen de simplifier le processus de publication. Cela a du sens de restreindre l'accès rsync uniquement au répertoire qui est supposé être synchronisé. Ceci peut être fait en utilisant rrsync.</pre><pre>&nbsp;</pre><pre><span class="cm-header">#### Étape 1 : Installer sur votre répertoire home (côté-serveur)</span></pre><pre>&nbsp;</pre><pre>S'il n'est pas déjà installé par votre hébergeur, vous pouvez faire ça vous-même :</pre><pre>&nbsp;</pre><pre><span class="cm-variable-2">- </span><span class="cm-link cm-variable-2">[Téléchargez rrsync]</span><span class="cm-string">(</span><span class="cm-link">http://ftp.samba.org/pub/unpacked/rsync/support/rrsync</span><span class="cm-string">)</span></pre><pre><span class="cm-variable-2">- Placez-le dans le sous-répertoire </span><span class="cm-comment cm-variable-2">`bin`</span><span class="cm-variable-2"> de votre répertoire home  (</span><span class="cm-comment cm-variable-2">`~/bin`</span><span class="cm-variable-2">)</span></pre><pre><span class="cm-variable-2">- Rendez-le exécutable (</span><span class="cm-comment cm-variable-2">`chmod +x`</span><span class="cm-variable-2">)</span></pre><pre>&nbsp;</pre><pre><span class="cm-header">#### Step 2: Set up certificate-based SSH access (server side)</span></pre><pre>&nbsp;</pre><pre>This <span class="cm-link">[process]</span><span class="cm-string">(</span><span class="cm-link">https://wiki.gentoo.org/wiki/SSH#Passwordless_Authentication</span><span class="cm-string">)</span> is</pre><pre>described in several places online. What is different from the typical approach</pre><pre>is to put the restriction to certificate-based authorization in</pre><pre><span class="cm-comment">`~/.ssh/authorized_keys`</span>. Then, launch <span class="cm-comment">`rrsync`</span> and supply</pre><pre>it with the folder it shall have read-write access to:</pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>command="$HOME/bin/rrsync <span class="cm-tag">&lt;folder&gt;</span>",no-agent-forwarding,no-port-forwarding,no-pty,no-user-rc,no-X11-forwarding ssh-rsa <span class="cm-tag">&lt;cert&gt;</span></pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>`<span class="cm-tag">&lt;folder&gt;</span>` is the path to your site. E.g., `~/public_html/you.org/blog-html/`.</pre><pre>&nbsp;</pre><pre>#### Step 3: Rsync (client-side)</pre><pre>&nbsp;</pre><pre>Add the `deploy` script to the site source folder:</pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>#!/bin/sh</pre><pre>&nbsp;</pre><pre>rsync -crvz --rsh=ssh -p2222' --delete-after --delete-excluded &nbsp; <span class="cm-tag">&lt;folder&gt;</span> <span class="cm-tag">&lt;user&gt;</span>@<span class="cm-tag">&lt;site&gt;</span>:</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>Command line parameters are:</pre><pre>&nbsp;</pre><pre>- `--rsh=ssh -p2222` <span class="cm-atom">&amp;mdash;</span> The port for SSH access. It is required if</pre><pre>your host uses a different port than the default (e.g, HostGator)</pre><pre>- `<span class="cm-tag">&lt;folder&gt;</span>` <span class="cm-atom">&amp;mdash;</span> The name of the local output folder (defaults to `_site`)</pre><pre>- `<span class="cm-tag">&lt;user&gt;</span>` <span class="cm-atom">&amp;mdash;</span> The username for your hosting account</pre><pre>- `<span class="cm-tag">&lt;site&gt;</span>` <span class="cm-atom">&amp;mdash;</span> Your hosting server</pre><pre>&nbsp;</pre><pre>Using this setup, you might run the following command:</pre><pre>&nbsp;</pre><pre>{% highlight bash %}</pre><pre>rsync -crvz --rsh='ssh -p2222' --delete-after --delete-excluded &nbsp; _site/ hostuser@example.org:</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>Don't forget the column `:` after server name!</pre><pre>&nbsp;</pre><pre>#### Step 4 (Optional): Exclude the transfer script from being copied to the output folder.</pre><pre>&nbsp;</pre><pre>This step is recommended if you use these instructions to deploy your site. If</pre><pre>you put the `deploy` script in the root folder of your project, Jekyll will</pre><pre>copy it to the output folder. This behavior can be changed in `_config.yml`.</pre><pre>&nbsp;</pre><pre>Just add the following line:</pre><pre>&nbsp;</pre><pre>{% highlight yaml %}</pre><pre># Do not copy these files to the output directory</pre><pre>exclude: ["deploy"]</pre><pre>{% endhighlight %}</pre><pre>&nbsp;</pre><pre>Alternatively, you can use an `rsync-exclude.txt` file to control which files will be transferred to your server.</pre><pre>&nbsp;</pre><pre>#### Done!</pre><pre>&nbsp;</pre><pre>Now it's possible to publish your website simply by running the  `deploy` </pre><pre>script. If your SSH certificate  is [passphrase-protected](<span class="cm-link">https://martin.kleppmann.com/2013/05/24/improving-security-of-ssh-private-keys.html</span>), you will be asked to enter it when the</pre><pre>script executes.</pre><pre>&nbsp;</pre><pre>&nbsp;</pre><pre>## Rack-Jekyll</pre><pre>&nbsp;</pre><pre>[Rack-Jekyll](<span class="cm-link">http://github.com/bry4n/rack-jekyll/</span>) est un moyen facile de déployer votre site sur tout serveur Rack tel que Amazon EC2, Slicehost, Heroku et ainsi de suite. </pre><pre>Il peut aussi tourner avec [shotgun](<span class="cm-link">http://github.com/rtomakyo/shotgun/</span>), [rackup](<span class="cm-link">http://github.com/rack/rack</span>), [mongrel](<span class="cm-link">http://github.com/mongrel/mongrel</span>), [unicorn](<span class="cm-link">http://github.com/defunkt/unicorn/</span>), et d'[autres](<span class="cm-link">https://github.com/adaoraul/rack-jekyll#readme</span>).</pre><pre>&nbsp;</pre><pre>Lisez [ce post](<span class="cm-link">http://blog.crowdint.com/2010/08/02/instant-blog-using-jekyll-and-heroku.html</span>) pour savoir comment déployer sur Heroku en utilisant Rack-Jekyll.</pre><pre>&nbsp;</pre><pre>## Jekyll-Admin pour Rails</pre><pre>&nbsp;</pre><pre>Si vous voulez maintenir Jekyll dans votre app existante Rails, [Jekyll-Admin](<span class="cm-link">http://github.com/zkarpinski/Jekyll-Admin</span>) contient un code à lâcher pour rendre ça possible. </pre><pre>Regardez la page [README](<span class="cm-link">http://github.com/zkarpinski/Jekyll-Admin/blob/master/README</span>) de Jekyll-Admin pour plus de détails.</pre><pre>&nbsp;</pre><pre>## Amazon S3</pre><pre>&nbsp;</pre><pre>Si vous voulez héberger votre site sur Amazon S3, vous pouvez faire ainsi avec l'application </pre><pre>[s3_website](<span class="cm-link">https://github.com/laurilehmijoki/s3_website</span>). Elle poussera votre site vers Amazon S3 où il peut être servi comme n'importe quel serveur web, pouvant dynamiquement passer à l'échelle pour du trafic presque illimité. Cette approche a l'avantage d'être parmi l'option d'hébergement la plus économique pour des blogs de gros volume, car vous ne payez que pour ce que vous utilisez.</pre><pre>&nbsp;</pre><pre>&nbsp;</pre><pre>## OpenShift</pre><pre>&nbsp;</pre><pre>Si vous souhaitez déployer votre site sur OpenShift, il y a [une cartouche pour cela](<span class="cm-link">https://github.com/openshift-cartridges/openshift-jekyll-cartridge</span>).</pre><pre>&nbsp;</pre><pre>&nbsp;</pre><pre>##ProTruc : Pour un hébergement Jekyll zéro-tracas, utilisez les Pages GitHub</pre><pre>&nbsp;</pre><pre>Les Pages GitHub sont motorisées en coulisses par Jekyll, par conséquent si vous cherchez un hébergement zéro-tracas, une solution à coût zéro, les Pages GitHub sont un moyen génial pour <span class="cm-tag">&lt;a</span> <span class="cm-attribute">href</span>=<span class="cm-string">"</span><span class="cm-link">http://pages.github.com/</span><span class="cm-string">"</span><span class="cm-tag">&gt;</span>héberger gratuitement votre site web-motorisé-par-Jekyll<span class="cm-tag">&lt;/a&gt;</span>.</pre><pre>&nbsp;</pre></div><div class="CodeMirror-cursor" style="left: 185.281px; top: 3988px; height: 16px;">&nbsp;</div><div class="CodeMirror-cursor CodeMirror-secondarycursor" style="display: none;">&nbsp;</div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 6504px;"></div><div class="CodeMirror-gutters" style="display: none; height: 6504px;"></div></div></div>
    </div>
    <div id="preview" class="view preview prose"></div>
  </div>
</div>
</div></div>

<div class="prose-menu dropdown-menu">
  <div class="inner clearfix">
    <a href="http://prose.io/#" class="icon branding dropdown-hover" data-link="true">Prose</a>
    <ul class="dropdown clearfix">
      <li><a href="http://prose.io/#">Prose</a></li>
      <li><a class="about" href="http://prose.io/#about">About</a></li>
      <li><a class="help" href="https://github.com/prose/prose">Developers</a></li>
      <li><a href="http://prose.io/#chooselanguage">Language</a></li>
      <li class="divider authenticated"></li>
      <li class="authenticated">
        <a href="http://prose.io/#" class="logout">Logout</a>
      </li>
    </ul>
  </div>
</div>
</div>
  <script src="./Editing _posts_2014-01-12-deploiement-Jekyll.markdown_2014-01-12-deploiement-Jekyll.markdown at master · Prose_files/locale.js"></script>
  <script src="./Editing _posts_2014-01-12-deploiement-Jekyll.markdown_2014-01-12-deploiement-Jekyll.markdown at master · Prose_files/prose.js"></script>


</body></html>